---
layout: post
title: Node APIç§å­é¡¹ç›® (ä¸€)é¡¹ç›®ç»¼è¿°
key: 20180125
tags: restful node.js
---

## å‰è¨€
åŸºäºæœ¬äººåœ¨ç°åœ¨å…¬å¸çš„Nodeå¾®æœåŠ¡å®è·µ, ä¸æ–­ç»´æŠ¤å‡çº§ç€ä¸€ä¸ªNode Restful APIç§å­é¡¹ç›®, ç‰¹æ­¤å…±äº«å‡ºæ¥ä»¥ä¾›å€Ÿé‰´å’Œè®¨è®º. é¡¹ç›®ä¸­å‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿éƒ½ä½¿ç”¨äº†node/javascriptåŠç›¸åº”æ¨¡å—çš„æœ€æ–°åŠŸèƒ½, è¯­æ³•, å’Œå®è·µ.  
å¦‚æœä½ éœ€è¦çš„æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„æ¡†æ¶, eggjsåº”è¯¥æ˜¯å¾ˆå¥½çš„é€‰æ‹©. å¦‚æœä½ åŠ¨æ‰‹èƒ½åŠ›å¼º, è¿½æ±‚è‡ªç”±çµæ´», å¹¶ä¸”ä¸æ’æ–¥express, é‚£å¯ä»¥è¯•è¯•é‡‡ç”¨æˆ‘è¿™ä¸ªé¡¹ç›®.  

é¡¹ç›®githubä»“åº“åœ°å€, æ¬¢è¿star: [https://github.com/xiaozhongliu/node-api-seed](https://github.com/xiaozhongliu/node-api-seed)  
ä¸‹é¢å…ˆè´´ä¸€ä¸‹æˆ‘åœ¨githubä¸Šå¯¹é¡¹ç›®çš„ç»¼åˆæè¿°, å®Œäº†åœ¨ä¸‹ä¸€ç¯‡å¸–å­ä¼šä¸€ä¸€å±•ç¤ºé¡¹ç›®çš„å„ä¸ªæ–¹é¢, è‡³äºæ€ä¹ˆå®ç°çš„å¯ä»¥çœ‹æºç , ç›¸ä¿¡ä½ ä¼šå–œæ¬¢ä¸Šæˆ‘å¹²å‡€ç®€æ´, å±‚æ¬¡æ¸…æ™°, ä¸æ—¶ä¿±è¿›çš„ä»£ç é£æ ¼çš„ğŸ˜….

## ç»¼è¿°

###### Techs involved

|Aspect     |Tech                                                             |
|:---       |:---                                                             |
|web fx     |[express](https://github.com/expressjs/express)                  |
|task       |[node-schedule](https://github.com/node-schedule/node-schedule)  |
|db postgres|[sequelize](https://github.com/sequelize/sequelize)              |
|db mongodb |[mongoose](https://github.com/Automattic/mongoose)               |
|memcache   |[node_redis](https://github.com/NodeRedis/node_redis)            |
|http client|[axios](https://github.com/axios/axios)                          |
|logger     |[log4js-node](https://github.com/log4js-node/log4js-node)        |
|mailer     |[nodemailer](https://github.com/nodemailer/nodemailer)           |
|dashboard  |[express-status-monitor](https://github.com/RafalWilinski/express-status-monitor) |
|jwt auth   |[jsonwebtoken](https://github.com/auth0/node-jsonwebtoken)       |
|validation |[express-validator](https://github.com/ctavan/express-validator) |
|async flow |[async/await of ES7](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) |
|log auth   |[http-auth](https://github.com/http-auth/http-auth)              |
|js checker |[eslint](https://eslint.org/)                                    |
|proc mana  |[pm2](http://pm2.keymetrics.io/)                                 |

###### Other features offering
Api access control via ts & token.  
Elaborate api request log into files.  
Flexible declarative request validation.  
Request log online view behind http auth.  
Server status monitor dashboard behind http auth.  
Ready made api samples with jwt and latest js features.  
Centralized system level config & messages management.  
Reasonable multi-env config merging mechanism.  
Definite DRY, SRP, AOP, ES6/ES7, OCD, etc.

###### Npm commands usage
```bash
cnpm i      # install all packages for dev env
npm start   # run service in dev env, or hit F5 to debug in vsc
npm run pm2start        # host via pm2 in prod env
npm run pm2startqa      # host via pm2 in qa env
npm run pm2starttest    # host via pm2 in test env
npm run pm2restart      # restart hosted service in prod env
npm run pm2restartqa    # restart hosted service in qa env
npm run pm2restarttest  # restart hosted service in test env
npm run pm2stop         # hang up hosted service
npm run pm2delete       # remove hosted service
```
